include::../Header.adoc[]

== Sonar
As the Lidar is not able to detect glass Willy is provided with 8 sonar sensors. The used sensors are HC-SR04 ultrasonic sensor, and they are mounted on 3D printed ball joints. 

image:media/SonarSensorAssembly.PNG[]

=== Repository
====
https://github.com/Windesheim-Willy/sonar[Windesheim-Willy/sonar, role="external", window="_blank"]
====

=== Electrical setup

The sensors are connected to an Arduino Uno with one continuos wiring harnass, provided with connectors. The power and trigger wires are looped and the echo signal is seperated as can be found in the schematic below:

image:media/SonarDiagram.PNG[]

=== Software

==== Arduino Uno

The code on the Arduino which reads out the sonars is pretty straightforward. It will calculate the distance and limit the value to 2 meters. The data is read out and send via serial sequentially a.s.a.p. 

==== PI
The sonars will start automatic when the PI is running. The PI will tag the sensors (left, right etc.) and publish the data to ROS. The sonar node can be started manually by going into the root of the sonar repo:

[source,shell]
----
./START start
----

==== RVIZ
RVIZ will visualise the data of the sensors and represent cones for each sensor.

=== Notes

==== View cone
The view cone of the sensor is very limited. It will only detect a obstacle if the angle with the sensor straight in line. This is a drawback for the effectiveness on detecting small objects like table legs. 

==== Minimum range
The minimum range is 5 cm. If a object gets closer the Arduino will report 2m distance. 
