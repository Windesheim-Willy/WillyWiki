<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<title>ROS master</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
:not(pre)>code.nobreak{word-wrap:normal}
:not(pre)>code.nowrap{white-space:nowrap}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
td.tableblock>.content>:last-child.sidebarblock{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="article toc2 toc-left">
<div id="header">
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_ros_master">1. ROS master</a>
<ul class="sectlevel2">
<li><a href="#_repository">1.1. Repository</a></li>
<li><a href="#_how_to_run">1.2. How to run?</a></li>
<li><a href="#_how_to_run_via_docker">1.3. How to run via Docker?</a></li>
</ul>
</li>
<li><a href="#_new_ros_master_on_lubuntu_for_multimaster_node_for_willy">2. New ROS master on Lubuntu for Multimaster node for Willy</a></li>
<li><a href="#_sonar">3. Sonar</a>
<ul class="sectlevel2">
<li><a href="#_repository_2">3.1. Repository</a></li>
<li><a href="#_electrical_setup">3.2. Electrical setup</a></li>
<li><a href="#_software">3.3. Software</a>
<ul class="sectlevel3">
<li><a href="#_arduino_uno">3.3.1. Arduino Uno</a></li>
<li><a href="#_pi">3.3.2. PI</a></li>
<li><a href="#_rviz">3.3.3. RVIZ</a></li>
</ul>
</li>
<li><a href="#_advice">3.4. Advice</a></li>
<li><a href="#_notes">3.5. Notes</a>
<ul class="sectlevel3">
<li><a href="#_view_cone">3.5.1. View cone</a></li>
<li><a href="#_minimum_range">3.5.2. Minimum range</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_lidar">4. LIDAR</a>
<ul class="sectlevel2">
<li><a href="#_repository_3">4.1. Repository</a>
<ul class="sectlevel3">
<li><a href="#_background">4.1.1. Background</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_localization_and_navigation">5. Localization and navigation</a>
<ul class="sectlevel2">
<li><a href="#_repository_4">5.1. Repository</a></li>
<li><a href="#_how_does_it_work">5.2. How does it work</a>
<ul class="sectlevel3">
<li><a href="#_navigation">5.2.1. Navigation</a></li>
<li><a href="#_costmaps">5.2.2. Costmaps</a></li>
<li><a href="#_mapping">5.2.3. Mapping</a></li>
</ul>
</li>
<li><a href="#_how_to_run_2">5.3. How to run?</a></li>
</ul>
</li>
<li><a href="#_motor_controller">6. Motor controller</a>
<ul class="sectlevel2">
<li><a href="#_repository_5">6.1. Repository</a></li>
<li><a href="#_starting_the_motor_controller">6.2. Starting the motor controller</a></li>
<li><a href="#_main_program_motortest_ino">6.3. Main program (MotorTest.ino)</a>
<ul class="sectlevel3">
<li><a href="#_arduino_reading_cmd_vel_messages_from_ros">6.3.1. Arduino reading /cmd_vel messages from ROS</a></li>
<li><a href="#_writing_to_the_drive_controller">6.3.2. Writing to the drive controller</a></li>
<li><a href="#_broadcasting_to_the_emergency_channel">6.3.3. Broadcasting to the emergency channel</a></li>
</ul>
</li>
<li><a href="#_encoders">6.4. Encoders</a></li>
<li><a href="#_controlloop">6.5. Controlloop</a></li>
<li><a href="#_pid_controller">6.6. PID controller</a>
<ul class="sectlevel3">
<li><a href="#_implementation">6.6.1. Implementation</a></li>
<li><a href="#_pid_viewer">6.6.2. PID Viewer</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_joystick">7. Joystick</a>
<ul class="sectlevel2">
<li><a href="#_repository_6">7.1. Repository</a></li>
<li><a href="#_prerequisites">7.2. Prerequisites</a></li>
</ul>
</li>
<li><a href="#_kinect">Kinect</a>
<ul class="sectlevel1">
<li><a href="#_development_choices">1. Development choices</a></li>
<li><a href="#_kinect_specs">2. Kinect Specs</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="toc" class="dlist toc2">
<dl>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/welcome.html">Welcome</a></dt>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/projectwilly/index.html">Project Willy</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/projectwilly/history.html">History of Willy</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/projectwilly/projectwilly.html">Project Willy</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/projectwilly/Publicity.html">Publicity</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/projectwilly/Sponsors.html">Sponsors</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/getting_started/index.html">Getting started</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/getting_started/Introduction.html">Introduction to ROS</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/getting_started/Development-guide.html">Development Guide</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/getting_started/Driving_Willy.html">Driving Willy</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/getting_started/Manual.html">Manual</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/getting_started/Wiki.html">Wiki Manual</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/buildofwilly/index.html">Build of Willy</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/buildofwilly/Design_History.html">Design history</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/buildofwilly/Hardware.html">Hardware</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/architecture/index.html">Architecture</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/architecture/Software.html">Software Architecture</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/architecture/rostopics.html">ROS topic design</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/hardware_nodes/index.html">Raspberry Pi&#8217;s</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/hardware_nodes/sensor_node.html">Sensor node</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/hardware_nodes/si_node.html">Social Interaction node</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/hardware_nodes/power_node.html">Power node</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/components/index.html">Components</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/ROS-master.html">ROS master</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/ROS_master_lubuntu.html">New ROS master on Lubuntu</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/sonar.html">Sonar</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/lidar.html">Lidar</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/kinect.html">Kinect</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/Localization_and_navigation.html">Localization and navigation</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/motor_controller.html">Motor controller</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/joystick.html">Joystick</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/lessons_learned/index.html">Lessons learned</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/lessons_learned/Todo.html">Todo &amp; Advice</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/lessons_learned/Lessonslearned.html">Lessons Learned</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/index.html">Archive</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/previousgroups.html">Previous Groups</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/Archiveresearch.html">Research Archive</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/Skylab.html">Skylab Architecture</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/skylab/index.html">Skylab</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/multi_master.html">Multi master</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/willy_wrt.html">WillyWRT</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/Realisation.html">Realisation</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/Hardware.html">Hardware</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/brain.html">Brain</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/Design-guide.html">Design Guild</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/social_interaction.html">Social interaction</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/speech.html">Speech</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/speech_recognition.html">Speech recognition</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/IMU.html">IMU</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/human_detection.html">Human Detection</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/Radeffect_app.html">Radeffect App</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div id="toc" class="dlist toc2">
<dl>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/welcome.html">Welcome</a></dt>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/projectwilly/index.html">Project Willy</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/projectwilly/history.html">History of Willy</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/projectwilly/projectwilly.html">Project Willy</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/projectwilly/Publicity.html">Publicity</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/projectwilly/Sponsors.html">Sponsors</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/getting_started/index.html">Getting started</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/getting_started/Introduction.html">Introduction to ROS</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/getting_started/Development-guide.html">Development Guide</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/getting_started/Driving_Willy.html">Driving Willy</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/getting_started/Manual.html">Manual</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/getting_started/Wiki.html">Wiki Manual</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/buildofwilly/index.html">Build of Willy</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/buildofwilly/Design_History.html">Design history</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/buildofwilly/Hardware.html">Hardware</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/architecture/index.html">Architecture</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/architecture/Software.html">Software Architecture</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/architecture/rostopics.html">ROS topic design</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/hardware_nodes/index.html">Raspberry Pi&#8217;s</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/hardware_nodes/sensor_node.html">Sensor node</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/hardware_nodes/si_node.html">Social Interaction node</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/hardware_nodes/power_node.html">Power node</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/components/index.html">Components</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/ROS-master.html">ROS master</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/ROS_master_lubuntu.html">New ROS master on Lubuntu</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/sonar.html">Sonar</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/lidar.html">Lidar</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/kinect.html">Kinect</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/Localization_and_navigation.html">Localization and navigation</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/motor_controller.html">Motor controller</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/joystick.html">Joystick</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/lessons_learned/index.html">Lessons learned</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/lessons_learned/Todo.html">Todo &amp; Advice</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/lessons_learned/Lessonslearned.html">Lessons Learned</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/index.html">Archive</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/previousgroups.html">Previous Groups</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/Archiveresearch.html">Research Archive</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/Skylab.html">Skylab Architecture</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/skylab/index.html">Skylab</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/multi_master.html">Multi master</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/willy_wrt.html">WillyWRT</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/Realisation.html">Realisation</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/Hardware.html">Hardware</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/brain.html">Brain</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/Design-guide.html">Design Guild</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/social_interaction.html">Social interaction</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/speech.html">Speech</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/speech_recognition.html">Speech recognition</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/IMU.html">IMU</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/human_detection.html">Human Detection</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/Radeffect_app.html">Radeffect App</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="sect1">
<h2 id="_ros_master">1. ROS master</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The ROS master serves to be the center of communication between the different nodes. The ROS master node provides naming and registration services to the rest of the nodes in Willy. It tracks publishers and subscribers to topics and allows for automatic connections to these topics between nodes. The role of the ROS Master is to let the nodes interact with each other without a direct connection.</p>
</div>
<div class="sect2">
<h3 id="_repository">1.1. Repository</h3>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p><a href="https://github.com/Windesheim-Willy/ROS-master" class="external" target="_blank" rel="noopener">Windesheim-Willy/ROS-master</a></p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_how_to_run">1.2. How to run?</h3>
<div class="paragraph">
<p>There is an included shell script found within the folder <code>/home/willy/Documents/willy</code> called <code>start-willy.sh</code>, this will start the ROS Master along with all required plug-ins, components and parameters.</p>
</div>
<div class="paragraph">
<p>To execute this script, open a terminal window and invoke the script as a command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">cd ~/Documents/willy
./start-willy.sh</code></pre>
</div>
</div>
<div class="paragraph">
<p>For convenience, a command alias <code>startwilly</code> allows this script to be run anywhere within a command-line environment or terminal window.</p>
</div>
</div>
<div class="sect2">
<h3 id="_how_to_run_via_docker">1.3. How to run via Docker?</h3>
<div class="paragraph">
<p>To run only the ROS master the Docker can be used. The Dockerfile of ROS master is automatically built on Dockerhub.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p><a href="https://hub.docker.com/r/windesheimwinny/ros-master" class="external" target="_blank" rel="noopener">windesheimwinny/ros-master</a></p>
</div>
</div>
</div>
<div class="paragraph">
<p>Run the build docker image:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">docker-compose up</code></pre>
</div>
</div>
<div class="paragraph">
<p>For development purposes it can be usefull to build the Dockerfile locally and to use this image. The docker-compose.build.yml file builds first the image and after the build start the container.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">docker-compose -f docker-compose.yml -f docker-compose.build.yml up</code></pre>
</div>
</div>
<div id="toc" class="dlist toc2">
<dl>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/welcome.html">Welcome</a></dt>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/projectwilly/index.html">Project Willy</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/projectwilly/history.html">History of Willy</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/projectwilly/projectwilly.html">Project Willy</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/projectwilly/Publicity.html">Publicity</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/projectwilly/Sponsors.html">Sponsors</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/getting_started/index.html">Getting started</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/getting_started/Introduction.html">Introduction to ROS</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/getting_started/Development-guide.html">Development Guide</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/getting_started/Driving_Willy.html">Driving Willy</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/getting_started/Manual.html">Manual</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/getting_started/Wiki.html">Wiki Manual</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/buildofwilly/index.html">Build of Willy</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/buildofwilly/Design_History.html">Design history</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/buildofwilly/Hardware.html">Hardware</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/architecture/index.html">Architecture</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/architecture/Software.html">Software Architecture</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/architecture/rostopics.html">ROS topic design</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/hardware_nodes/index.html">Raspberry Pi&#8217;s</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/hardware_nodes/sensor_node.html">Sensor node</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/hardware_nodes/si_node.html">Social Interaction node</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/hardware_nodes/power_node.html">Power node</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/components/index.html">Components</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/ROS-master.html">ROS master</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/ROS_master_lubuntu.html">New ROS master on Lubuntu</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/sonar.html">Sonar</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/lidar.html">Lidar</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/kinect.html">Kinect</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/Localization_and_navigation.html">Localization and navigation</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/motor_controller.html">Motor controller</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/joystick.html">Joystick</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/lessons_learned/index.html">Lessons learned</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/lessons_learned/Todo.html">Todo &amp; Advice</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/lessons_learned/Lessonslearned.html">Lessons Learned</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/index.html">Archive</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/previousgroups.html">Previous Groups</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/Archiveresearch.html">Research Archive</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/Skylab.html">Skylab Architecture</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/skylab/index.html">Skylab</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/multi_master.html">Multi master</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/willy_wrt.html">WillyWRT</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/Realisation.html">Realisation</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/Hardware.html">Hardware</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/brain.html">Brain</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/Design-guide.html">Design Guild</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/social_interaction.html">Social interaction</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/speech.html">Speech</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/speech_recognition.html">Speech recognition</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/IMU.html">IMU</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/human_detection.html">Human Detection</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/Radeffect_app.html">Radeffect App</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_new_ros_master_on_lubuntu_for_multimaster_node_for_willy">2. New ROS master on Lubuntu for Multimaster node for Willy</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Because Multimaster is not available for Raspbian, node master node of Willy will be using Lubuntu.
ROS.org states that the best way is to use a pre-installed version <a href="http://wiki.ros.org/ROSberryPi/Installing%20ROS%20Kinetic%20on%20the%20Raspberry%20Pi" class="bare">http://wiki.ros.org/ROSberryPi/Installing%20ROS%20Kinetic%20on%20the%20Raspberry%20Pi</a></p>
</div>
<div class="paragraph">
<p>An SD Card Image with Ubuntu 16.04 (LXDE) and ROS Kinetic installed can be downloaded here for the Raspberry Pi 3. The here refers to:
<a href="https://downloads.ubiquityrobotics.com/" class="bare">https://downloads.ubiquityrobotics.com/</a> On this site the left button is chosen. This brings to <a href="https://downloads.ubiquityrobotics.com/pi.html" class="bare">https://downloads.ubiquityrobotics.com/pi.html</a>.</p>
</div>
<div class="paragraph">
<p>For Willy the latest version (2018-11-15-ubiquity-xenial-lxde) is choosen: <a href="https://cdn.ubiquityrobotics.net/2018-11-15-ubiquity-xenial-lxde-raspberry-pi.img.xz" class="bare">https://cdn.ubiquityrobotics.net/2018-11-15-ubiquity-xenial-lxde-raspberry-pi.img.xz</a></p>
</div>
<div class="paragraph">
<p>The SD image is also stored on the SharePoint site of Willy.</p>
</div>
<div class="paragraph">
<p>The image is flashed to the 16 GB SD card with Rufus 3.4, but any flash program can be used.</p>
</div>
<div class="paragraph">
<p>The standard user on the node is ubuntu with the password ubuntu as is stated on the site of the supplier.</p>
</div>
<div class="paragraph">
<p>The following adjustments to the image are made:
To ensure that the startup scripts from the supplier are disabled:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>sudo systemctl disable magni-base</pre>
</div>
</div>
<div class="paragraph">
<p>In /etc/ubiquity/env.sh the starting of roscore is already added, through roscore.services</p>
</div>
<div class="paragraph">
<p>Change /etc/ubiquity/env.sh</p>
</div>
<div class="listingblock">
<div class="content">
<pre>remove .local from export ROS_HOSTNAME=$(hostname).local</pre>
</div>
</div>
<div class="paragraph">
<p>Change /etc/systemd/system/roscore.service Add extra line after line starting with ExecStart</p>
</div>
<div class="listingblock">
<div class="content">
<pre>ExecStartPost=/bin/sh -c ". /home/ubuntu/multimaster.sh</pre>
</div>
</div>
<div class="paragraph">
<p>Add file /home/ubuntu/multimaster.sh:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>rosrun master_discovery_fkie master_discovery &gt;/dev/null 2&gt;&amp;1 &amp;
rosrun master_sync_fkie master_sync &gt;/dev/null 2&gt;&amp;1 &amp;</pre>
</div>
</div>
<div class="paragraph">
<p>Update and upgrade the OS:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>sudo apt-get update
sudo apt-get upgrade</pre>
</div>
</div>
<div class="paragraph">
<p>Through the GUI WLAN has to be disabled.</p>
</div>
<div class="paragraph">
<p>Install openssh server and check status:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>sudo apt-get install openssh-server
sudo service ssh status</pre>
</div>
</div>
<div class="paragraph">
<p>The complete environment of ROS with multimaster is included.</p>
</div>
<div class="paragraph">
<p>The node on Willy will be the ROS master with portnumber 11311, which is the standard setting.</p>
</div>
<div class="paragraph">
<p>Enable multicast feature on the node:
edit the /etc/sysctl.conf file and add the following line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>net.ipv4.icmp_echo_ignore_broadcasts=0</pre>
</div>
</div>
<div class="paragraph">
<p>Edit /etc/hostnode:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Change hostname to brainnode</pre>
</div>
</div>
<div class="paragraph">
<p>edit /etc/hosts:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>add all the hosts of Willy and Skylab. The correct info can be found on SharePoint.</pre>
</div>
</div>
<div class="paragraph">
<p>Install VNC on the node:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>sudo apt-get update
sudo apt install xfce4 xfce4-goodies tightvncserver</pre>
</div>
</div>
<div class="paragraph">
<p>Add a secure password on VNC with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>vncserver</pre>
</div>
</div>
<div class="paragraph">
<p>Reference for VNC:
<a href="https://www.digitalocean.com/community/tutorials/how-to-install-and-configure-vnc-on-ubuntu-16-04" class="bare">https://www.digitalocean.com/community/tutorials/how-to-install-and-configure-vnc-on-ubuntu-16-04</a>
:numbered:
:toc:
:toclevels: 5
:icons: font</p>
</div>
<div id="toc" class="dlist toc2">
<dl>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/welcome.html">Welcome</a></dt>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/projectwilly/index.html">Project Willy</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/projectwilly/history.html">History of Willy</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/projectwilly/projectwilly.html">Project Willy</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/projectwilly/Publicity.html">Publicity</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/projectwilly/Sponsors.html">Sponsors</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/getting_started/index.html">Getting started</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/getting_started/Introduction.html">Introduction to ROS</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/getting_started/Development-guide.html">Development Guide</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/getting_started/Driving_Willy.html">Driving Willy</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/getting_started/Manual.html">Manual</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/getting_started/Wiki.html">Wiki Manual</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/buildofwilly/index.html">Build of Willy</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/buildofwilly/Design_History.html">Design history</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/buildofwilly/Hardware.html">Hardware</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/architecture/index.html">Architecture</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/architecture/Software.html">Software Architecture</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/architecture/rostopics.html">ROS topic design</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/hardware_nodes/index.html">Raspberry Pi&#8217;s</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/hardware_nodes/sensor_node.html">Sensor node</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/hardware_nodes/si_node.html">Social Interaction node</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/hardware_nodes/power_node.html">Power node</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/components/index.html">Components</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/ROS-master.html">ROS master</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/ROS_master_lubuntu.html">New ROS master on Lubuntu</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/sonar.html">Sonar</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/lidar.html">Lidar</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/kinect.html">Kinect</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/Localization_and_navigation.html">Localization and navigation</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/motor_controller.html">Motor controller</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/joystick.html">Joystick</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/lessons_learned/index.html">Lessons learned</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/lessons_learned/Todo.html">Todo &amp; Advice</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/lessons_learned/Lessonslearned.html">Lessons Learned</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/index.html">Archive</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/previousgroups.html">Previous Groups</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/Archiveresearch.html">Research Archive</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/Skylab.html">Skylab Architecture</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/skylab/index.html">Skylab</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/multi_master.html">Multi master</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/willy_wrt.html">WillyWRT</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/Realisation.html">Realisation</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/Hardware.html">Hardware</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/brain.html">Brain</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/Design-guide.html">Design Guild</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/social_interaction.html">Social interaction</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/speech.html">Speech</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/speech_recognition.html">Speech recognition</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/IMU.html">IMU</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/human_detection.html">Human Detection</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/Radeffect_app.html">Radeffect App</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_sonar">3. Sonar</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As the LIDAR is not able to detect glass consistently, Willy is equipped with 8 sonar sensors. The sensors used are HC-SR04 ultrasonic sensor. These sensors are mounted on 3D printed ball joints, as shown in the picture below.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../media/SonarSensorAssembly.png" alt="SonarSensorAssembly"></span></p>
</div>
<div class="sect2">
<h3 id="_repository_2">3.1. Repository</h3>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p><a href="https://github.com/Windesheim-Willy/sonar">Windesheim-Willy/sonar</a></p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_electrical_setup">3.2. Electrical setup</h3>
<div class="paragraph">
<p>The sensors are connected to an Arduino Uno with one continuous wiring harness, provided with connectors. The power and trigger wires are looped and the echo signal is separated as can be found in the schematic below:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../media/SonarDiagram.png" alt="SonarDiagram"></span></p>
</div>
</div>
<div class="sect2">
<h3 id="_software">3.3. Software</h3>
<div class="sect3">
<h4 id="_arduino_uno">3.3.1. Arduino Uno</h4>
<div class="paragraph">
<p>The code on the Arduino which reads out the sonars is pretty straightforward. It will calculate the distance and limit the value to 2 meters. The data is read out and send via serial sequentially a.s.a.p.</p>
</div>
</div>
<div class="sect3">
<h4 id="_pi">3.3.2. PI</h4>
<div class="paragraph">
<p>The PI will tag the sensors (left, right etc.) and publish the data to ROS.
The Pi will not start automatically. Therefore the following steps have to be taken:</p>
</div>
<div class="paragraph">
<p>On willy&#8217;s laptop:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">ssh ubuntu@192.168.0.13
password can be found in sharepoint</code></pre>
</div>
</div>
<div class="paragraph">
<p>Make sure ROS master runs on the laptop:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">startwilly</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then this command will start the Pi:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">./start_sensornode.sh</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_rviz">3.3.3. RVIZ</h4>
<div class="paragraph">
<p>RVIZ will visualise the data of the sensors and represent the locations and distance for each sensor.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_advice">3.4. Advice</h3>
<div class="paragraph">
<p>The current sonar sensors, the HC-SR04, are only capable of pinging distance in a straight line, with a very narrow F.O.V.
This is detrimental to WTR&#8217;s ability to detect obstacles such as table legs, especially when reversing.
If this proves to be a serious detriment, parking sensors or industrial ultrasonic sensors could be the solution.</p>
</div>
</div>
<div class="sect2">
<h3 id="_notes">3.5. Notes</h3>
<div class="sect3">
<h4 id="_view_cone">3.5.1. View cone</h4>
<div class="paragraph">
<p>The view cone of the sensor is very limited. It will only detect a obstacle if the angle with the sensor straight in line. This is a drawback for the effectiveness on detecting small objects like table legs.</p>
</div>
</div>
<div class="sect3">
<h4 id="_minimum_range">3.5.2. Minimum range</h4>
<div class="paragraph">
<p>The minimum range is 5 cm. If a object gets closer the Arduino will report 2m distance.</p>
</div>
<div id="toc" class="dlist toc2">
<dl>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/welcome.html">Welcome</a></dt>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/projectwilly/index.html">Project Willy</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/projectwilly/history.html">History of Willy</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/projectwilly/projectwilly.html">Project Willy</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/projectwilly/Publicity.html">Publicity</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/projectwilly/Sponsors.html">Sponsors</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/getting_started/index.html">Getting started</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/getting_started/Introduction.html">Introduction to ROS</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/getting_started/Development-guide.html">Development Guide</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/getting_started/Driving_Willy.html">Driving Willy</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/getting_started/Manual.html">Manual</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/getting_started/Wiki.html">Wiki Manual</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/buildofwilly/index.html">Build of Willy</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/buildofwilly/Design_History.html">Design history</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/buildofwilly/Hardware.html">Hardware</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/architecture/index.html">Architecture</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/architecture/Software.html">Software Architecture</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/architecture/rostopics.html">ROS topic design</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/hardware_nodes/index.html">Raspberry Pi&#8217;s</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/hardware_nodes/sensor_node.html">Sensor node</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/hardware_nodes/si_node.html">Social Interaction node</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/hardware_nodes/power_node.html">Power node</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/components/index.html">Components</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/ROS-master.html">ROS master</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/ROS_master_lubuntu.html">New ROS master on Lubuntu</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/sonar.html">Sonar</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/lidar.html">Lidar</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/kinect.html">Kinect</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/Localization_and_navigation.html">Localization and navigation</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/motor_controller.html">Motor controller</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/joystick.html">Joystick</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/lessons_learned/index.html">Lessons learned</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/lessons_learned/Todo.html">Todo &amp; Advice</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/lessons_learned/Lessonslearned.html">Lessons Learned</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/index.html">Archive</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/previousgroups.html">Previous Groups</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/Archiveresearch.html">Research Archive</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/Skylab.html">Skylab Architecture</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/skylab/index.html">Skylab</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/multi_master.html">Multi master</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/willy_wrt.html">WillyWRT</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/Realisation.html">Realisation</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/Hardware.html">Hardware</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/brain.html">Brain</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/Design-guide.html">Design Guild</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/social_interaction.html">Social interaction</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/speech.html">Speech</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/speech_recognition.html">Speech recognition</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/IMU.html">IMU</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/human_detection.html">Human Detection</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/Radeffect_app.html">Radeffect App</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_lidar">4. LIDAR</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The LIDAR is a node to process the raw LIDAR information to the LIDAR topic.</p>
</div>
<div class="sect2">
<h3 id="_repository_3">4.1. Repository</h3>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p><a href="https://github.com/Windesheim-Willy/lidar" class="external" target="_blank" rel="noopener">Windesheim-Willy/lidar</a></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_background">4.1.1. Background</h4>
<div class="paragraph">
<p>The previous group has also done research on a LIDAR sensor.
Unfortunately the previous documentation stated that it was not possible
to link a LIDAR to ROS. Also other methods where somehow researched by a
previous group but not in the form of a LIDAR. (Research localization
system v1.1, 2017)</p>
</div>
<div class="paragraph">
<p>A LIDAR sensor uses a laser to measure distance. With these measurements
the sensor makes a map of all the objects in the environment.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../archive/2018S1/Research/media/current-status/image13.jpeg" alt="image"></span></p>
</div>
<div class="paragraph">
<p>The previous group has done some research concerning LIDAR and the link to
ROS, but came to the conclusion that it is not possible to create a link
between LIDAR and ROS. Therefore they decided to not implement the LIDAR
sensor.</p>
</div>
<div class="paragraph">
<p>After doing some research it was found that it is possible and supported to link ROS to a LIDAR sensor.</p>
</div>
<div class="paragraph">
<p>At this stage LIDAR is used to navigate with Willy. The sensor is
placed at the front of the robot.</p>
</div>
<div class="paragraph">
<p>The LIDAR is connected with an Ethernet connection via a switch to the pc.
:numbered:
:toc:
:toclevels: 5
:icons: font</p>
</div>
<div id="toc" class="dlist toc2">
<dl>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/welcome.html">Welcome</a></dt>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/projectwilly/index.html">Project Willy</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/projectwilly/history.html">History of Willy</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/projectwilly/projectwilly.html">Project Willy</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/projectwilly/Publicity.html">Publicity</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/projectwilly/Sponsors.html">Sponsors</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/getting_started/index.html">Getting started</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/getting_started/Introduction.html">Introduction to ROS</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/getting_started/Development-guide.html">Development Guide</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/getting_started/Driving_Willy.html">Driving Willy</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/getting_started/Manual.html">Manual</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/getting_started/Wiki.html">Wiki Manual</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/buildofwilly/index.html">Build of Willy</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/buildofwilly/Design_History.html">Design history</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/buildofwilly/Hardware.html">Hardware</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/architecture/index.html">Architecture</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/architecture/Software.html">Software Architecture</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/architecture/rostopics.html">ROS topic design</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/hardware_nodes/index.html">Raspberry Pi&#8217;s</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/hardware_nodes/sensor_node.html">Sensor node</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/hardware_nodes/si_node.html">Social Interaction node</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/hardware_nodes/power_node.html">Power node</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/components/index.html">Components</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/ROS-master.html">ROS master</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/ROS_master_lubuntu.html">New ROS master on Lubuntu</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/sonar.html">Sonar</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/lidar.html">Lidar</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/kinect.html">Kinect</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/Localization_and_navigation.html">Localization and navigation</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/motor_controller.html">Motor controller</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/joystick.html">Joystick</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/lessons_learned/index.html">Lessons learned</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/lessons_learned/Todo.html">Todo &amp; Advice</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/lessons_learned/Lessonslearned.html">Lessons Learned</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/index.html">Archive</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/previousgroups.html">Previous Groups</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/Archiveresearch.html">Research Archive</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/Skylab.html">Skylab Architecture</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/skylab/index.html">Skylab</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/multi_master.html">Multi master</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/willy_wrt.html">WillyWRT</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/Realisation.html">Realisation</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/Hardware.html">Hardware</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/brain.html">Brain</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/Design-guide.html">Design Guild</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/social_interaction.html">Social interaction</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/speech.html">Speech</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/speech_recognition.html">Speech recognition</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/IMU.html">IMU</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/human_detection.html">Human Detection</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/Radeffect_app.html">Radeffect App</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
this page has to be updated. No longer relevant
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_localization_and_navigation">5. Localization and navigation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The localization and navigation stack is a collection of nodes and plug-ins which process LIDAR data among others and use it to navigate on a pre-generated map.</p>
</div>
<div class="sect2">
<h3 id="_repository_4">5.1. Repository</h3>
<div class="paragraph">
<p><a href="https://github.com/Windesheim-Willy/navigation_stack" class="external" target="_blank" rel="noopener">Windesheim-Willy/navigation_stack</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_how_does_it_work">5.2. How does it work</h3>
<div class="sect3">
<h4 id="_navigation">5.2.1. Navigation</h4>
<div class="listingblock">
<div class="title">Data flow in navigation stack</div>
<div class="content">
<pre>                                       [map_server|1] -----\  [map_server|2]---\
                                                            \                   \
[lidar node] -&gt; [lidar_filters] -&gt; [laser_scan_matcher] -&gt; [AMCL] ------&gt; [move_base] -&gt; [cmd_vel]
                      \                                     /                /
                       \-----------------------------------/----------------/</pre>
</div>
</div>
<div class="paragraph">
<p>The LIDAR node captures the data from the hardware device and puts it on the service bus. The LIDAR data is not always perfect since the metal frame of the robot creates invalid data points. These invalid data points confuse the algorithms. This is fixed by adding the 'scan_to_scan_filter_chain' node from the 'laser_filters' package. Using a chain of two filters it is possible to "crop" the LIDAR data. This data is fed to the other nodes.</p>
</div>
<div class="paragraph">
<p>The 'laser_scan_matcher' node uses the filtered LIDAR data to create odometry data based on the moving data points. The odometry data only tells the stack how much it has moved relative to its starting position. Odometry data is also prone to drift especially when using the 'laser_scan_matcher' since it can&#8217;t handle big empty spaces. This is where the 'AMCL' node comes into play. The 'AMCL' node takes into account: the estimated starting position, odometry offset from the starting point, lidar data and a lidar map. It can determine the odometry drift based on the lidar data and the map and compensate with a second offset. Because the 'AMCL' also takes into account the map we now have localization.</p>
</div>
<div class="paragraph">
<p>'AMCL' uses the first instance of the 'map_server', this map server publishes the raw map which was generated by 'hector_map', just slightly cropped and rotated to improve performance. The 'move_base' node uses the second instance of the 'map_server' which publishes a modified map in which incorrectly mapped walls are manually filled in. This is done because the LIDAR can&#8217;t see reflective materials like glass or mirrors. By filling in these areas the 'move_base' will not try the navigate through glass. The 'AMCL' node however needs a map is is as close to the LIDAR data so it can&#8217;t localize itself.</p>
</div>
<div class="paragraph">
<p>This position is then fed into the 'move_base' node which uses the LIDAR data and map to create a maps of obstacles called costmaps. It then uses the position from 'AMCL', the costmaps and a goal to generate a path and start giving commands to the robot to follow that path as closely as possible</p>
</div>
</div>
<div class="sect3">
<h4 id="_costmaps">5.2.2. Costmaps</h4>
<div class="paragraph">
<p>RViz shows us three total maps, of which two are the Global costmap and the Local costmap. A small example the view of these maps in RViz is as following:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="assets/costmaps_view.png" alt="costmaps view">
</div>
</div>
<div class="paragraph">
<p>The gray areas are the pre-generated map of the fifth floor in the T-building of Windesheim. Light gray areas show where Willy can move freely and dark gray areas equal an obstacle (such as a cabinet) or a wall.</p>
</div>
<div class="paragraph">
<p>The Global costmap is seen as the red/cyan areas around certain walls and obstacles and calculates an inflated distance for each of these obstacles by a set amount, which we&#8217;ve set to around 10 centimeters.</p>
</div>
<div class="paragraph">
<p>The local costmap is shown as the white cube around the robot.
The LIDAR marks obstacles and walls on the local costmap using the distance its lasers measure, visualized as red squares, upon which the local costmap will inflate the obstacle&#8217;s distance by about 5 to 10 centimeters, indicated by a black area surrounding the red dots.
The cones of the ultrasonic sensors indicate their range, and the navigation stack will mark any obstacle the sensors detect as a small black dot/line in its range, enough to be detected as an obstacle by the navigation stack.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Unfortunately, it is unknown if the cones could be replaced by beams in order to reflect the current capabilities of the ultrasonic sensors, as they only measure in a straight line.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The obstacles persist for a set amount of time, but will not always be removed automatically, after some time or by walking around the robot, the obstacles could clear, but it is also possible to refresh the costmaps by issuing this command in a terminal window:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">rosservice call /move_base/clear_costmaps</code></pre>
</div>
</div>
<div class="paragraph">
<p>The "footprint" of the robot, visible as the green rectangle in the center, indicates its location and is used in calculating whether or not WTR is in an obstacle or not. It is a key for obstacle detection to work using the following rules:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If the green rectangle touches a red dot, the robot will assume it has hit an obstacle</p>
</li>
<li>
<p>If the green rectangle is inside a black area, it will recognize that it&#8217;s close to an obstacle, slow down and try to avoid the obstacle to prevent collision.</p>
</li>
<li>
<p>If the centerpoint of the robot (base_link) touches a black area, the robot will stop as it assumes it has hit an obstacle.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_mapping">5.2.3. Mapping</h4>
<div class="listingblock">
<div class="title">Data flow while mapping</div>
<div class="content">
<pre>[lidar node] -&gt; [lidar_filters] -&gt; [hector_mapping] -&gt; [map_saver]
    \---------&gt; [rosbag capture]</pre>
</div>
</div>
<div class="paragraph">
<p>The mapping process uses the same LIDAR data and LIDAR filters. The raw LIDAR data can also be captured in a bag-file so this mapping process can be redone off-line. The LIDAR data is fed into the 'hector_mapping' node which will generate a 2d map based on the LIDAR data.</p>
</div>
<div class="paragraph">
<p>However, this process is not always perfect. It has trouble seeing transparent and reflective surfaces. Objects like chairs and tables can be problematic since the surface area of the legs are small and easy to miss if the LIDAR is not close enough. Furthermore if objects become larger above the height at which the LIDAR measures the object may be drawn too small on the map causing collisions.</p>
</div>
<div class="paragraph">
<p>The 'hector_mapping' node is not great at erasing objects from the map. So it is best to map a area when there are no moving objects like humans.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_how_to_run_2">5.3. How to run?</h3>
<div class="paragraph">
<p>To run the localization and navigation stack you need to have an instance of the ROS Master and the LIDAR node running. If you have used the command alias <code>startwilly</code>, the navigation stack is run automatically along with the start of the ROS Master.</p>
</div>
<div class="paragraph">
<p>To start autonomous navigation manually, you need to invoke the start-up script by hand:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">cd ~/Documents/willy/components/navigation_stack/
./start-live-navstack.sh</code></pre>
</div>
</div>
<div class="paragraph">
<p>The navigation stack requires a LIDAR-generated map of the environment it must navigate in. This map can be built by manually moving the robot using the keyboard node and running the mapping process. The mapping process can be started with the following command</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">./start-live-mapping.sh</code></pre>
</div>
</div>
<div class="paragraph">
<p>In order to use this map a saved copy is needed. To save the map that is on the service bus use the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">rosrun map_server map_saver -f {name of save file}</code></pre>
</div>
</div>
<div class="paragraph">
<p>It has proven to be useful to test the software in a VM when access to the hardware is limited. To do so run the 'start-sim-navstack.sh' or 'start-sim-mapping.sh' instead of the commands listed above. These commands will start a replay of a rosbag containing lidar data instead of the real thing. They also set a parameter which tells the nodes to accept out of date timestamps which are required to function in a simulated environment
:numbered:
:toc:
:toclevels: 5
:icons: font</p>
</div>
<div id="toc" class="dlist toc2">
<dl>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/welcome.html">Welcome</a></dt>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/projectwilly/index.html">Project Willy</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/projectwilly/history.html">History of Willy</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/projectwilly/projectwilly.html">Project Willy</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/projectwilly/Publicity.html">Publicity</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/projectwilly/Sponsors.html">Sponsors</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/getting_started/index.html">Getting started</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/getting_started/Introduction.html">Introduction to ROS</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/getting_started/Development-guide.html">Development Guide</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/getting_started/Driving_Willy.html">Driving Willy</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/getting_started/Manual.html">Manual</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/getting_started/Wiki.html">Wiki Manual</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/buildofwilly/index.html">Build of Willy</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/buildofwilly/Design_History.html">Design history</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/buildofwilly/Hardware.html">Hardware</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/architecture/index.html">Architecture</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/architecture/Software.html">Software Architecture</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/architecture/rostopics.html">ROS topic design</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/hardware_nodes/index.html">Raspberry Pi&#8217;s</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/hardware_nodes/sensor_node.html">Sensor node</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/hardware_nodes/si_node.html">Social Interaction node</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/hardware_nodes/power_node.html">Power node</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/components/index.html">Components</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/ROS-master.html">ROS master</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/ROS_master_lubuntu.html">New ROS master on Lubuntu</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/sonar.html">Sonar</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/lidar.html">Lidar</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/kinect.html">Kinect</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/Localization_and_navigation.html">Localization and navigation</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/motor_controller.html">Motor controller</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/joystick.html">Joystick</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/lessons_learned/index.html">Lessons learned</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/lessons_learned/Todo.html">Todo &amp; Advice</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/lessons_learned/Lessonslearned.html">Lessons Learned</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/index.html">Archive</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/previousgroups.html">Previous Groups</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/Archiveresearch.html">Research Archive</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/Skylab.html">Skylab Architecture</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/skylab/index.html">Skylab</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/multi_master.html">Multi master</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/willy_wrt.html">WillyWRT</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/Realisation.html">Realisation</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/Hardware.html">Hardware</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/brain.html">Brain</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/Design-guide.html">Design Guild</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/social_interaction.html">Social interaction</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/speech.html">Speech</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/speech_recognition.html">Speech recognition</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/IMU.html">IMU</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/human_detection.html">Human Detection</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/Radeffect_app.html">Radeffect App</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_motor_controller">6. Motor controller</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Willy is based on a mobility scooter. The motor driver was once manually controlled by a joystick unit, but that was replaced by an arduino mega serving as motor controller.
The motor controller is subscribed to the drive topic from ROS, reads out the wheel encoders, compares them and controls the motors of Willy accordingly. This is explained briefly, for further details please read the hardware design and technological design documents.
motor controller listens to the "command velocity" topic and controls the motors of Willy.</p>
</div>
<div class="sect2">
<h3 id="_repository_5">6.1. Repository</h3>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p><a href="https://github.com/Windesheim-Willy/motor_controller" class="external" target="_blank" rel="noopener">Windesheim-Willy/motor_controller</a></p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_starting_the_motor_controller">6.2. Starting the motor controller</h3>
<div class="paragraph">
<p>Normally the motor controller is started automatically when the command below is executed:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">startwilly</code></pre>
</div>
</div>
<div class="paragraph">
<p>To start the motor controller manually, execute this command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">motorcon</code></pre>
</div>
</div>
<div class="paragraph">
<p>When the motor controller is started, the emergency button has to be pressed and reset otherwise no action will be seen.</p>
</div>
</div>
<div class="sect2">
<h3 id="_main_program_motortest_ino">6.3. Main program (MotorTest.ino)</h3>
<div class="paragraph">
<p>The main program communicates with ROS, handles the signals generated by the encoders (by using encoder.h) and controls the motors with a calculated output (from controlloop.h). Important functions are briefly explained below.</p>
</div>
<div class="sect3">
<h4 id="_arduino_reading_cmd_vel_messages_from_ros">6.3.1. Arduino reading /cmd_vel messages from ROS</h4>
<div class="paragraph">
<p>The geometry twist messages broadcast by ROS consist of two variables, turn and run. Turn will be the turn speed in rad/s and run will be the drive speed in m/s. The function reading these messages can be seen below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">    //Turn and drive variables are read out from ros and stored in irun and idrive.
    void messageCb(const geometry_msgs::Twist&amp; twistMsg)
    {
      irun = twistMsg.linear.x;
      iturn = twistMsg.angular.z;

      // store time at which message was received so old instructions are not repeated.
      time_stamp = millis();
    }</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_writing_to_the_drive_controller">6.3.2. Writing to the drive controller</h4>
<div class="paragraph">
<p>The code below is used to write to the drive controller of the wheelchair. This is done by serial communication.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">/*  Send values to motorcontroller of the mobility scooter by serial communication.
 *  The motorcontroller will automatically turn off the brakes and the motors will provide torque
 */
void SendToMotor(int Setdrive, int Setturn)
{
  int drive = Setdrive;                                                       //Set value from ros to motorcontroller
  int turn = Setturn;                                                       //Set value from ros to motorcontroller

  //Create data array
  data[0] = 0x6A;                                            //-Datagram always start with 0x6A
  data[1] = drive;                                           //-Drive +-100
  data[2] = turn;                                            //-Turn +-100
  data[3] = 0;                                               //-Driv mode
  data[4] = 0x0c;                                            //-Drive mode: 0x0c=fastest
  data[5] = 0xff - (data[0] + data[1] + data[2] + data[3] + data[4]); //-Checksum

  // Writing the data to the motorcontroller
  for (unsigned char i = 0; i &lt; 6; i++)
  {
    Serial1.write(data[i]);
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_broadcasting_to_the_emergency_channel">6.3.3. Broadcasting to the emergency channel</h4>
<div class="paragraph">
<p>Every iteration within the critical loop of the state of the emergency button will be broadcast. The motor controller will interrupt the circuits on a hardware level when the button is pushed. But in order to prevent wind-up within the PID controller the ROS messages is spoofed by zero. This is done by the function below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">//safety
void Stop()
{
    irun = 0;
    iturn = 0;
    SendToMotor(0, 0);
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_encoders">6.4. Encoders</h3>
<div class="paragraph">
<p>The encoders are attached to both front wheels. Encoders.h is included in the main program of the motor controller and calculates the speed of the wheel in m/s. The output of the encoders correspondents with the figure below. The code written to decode these outputs to stable speed is quite complex and uses various functions. Therefore we advise to read tech design to get a better understanding if needed.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="assets/QuadruatureEncoderOutput.png" alt="QuadruatureEncoderOutput">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_controlloop">6.5. Controlloop</h3>
<div class="paragraph">
<p>The main control loop consist of two PID controllers (TurnController and DriveController). The reference speed (irun and iturn) is compared with the actual speed and the difference (error) is send to the PID controllers. This is implemented in the function below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">    //Function sets reference, calculates error, then activate the calculation of outputs by the turn and drive functions.
    SetInputRef(float Turn_Input, float Drive_Input, float Speed_Sensor_L, float Speed_Sensor_R)
    {
      if(Turn_Input == 0 &amp;&amp; Drive_Input == 0)
      {
        DriveController.Reset();
        TurnController.Reset();
      }

      //calculate speed at which the robot is rotating, unit:  [rad/s]. 0.6 is the distance between the wheels in meters.
      Turn_Speed = (Speed_Sensor_R - Speed_Sensor_L)/0.6;

      //calculate the speed at which the robot is moving, unit:  [m/s]. 0.5 is used to provide an average between both wheels.
      Drive_Speed = (Speed_Sensor_R + Speed_Sensor_L)*0.5;

      //calculate errors.
      Turn_Error = Turn_Input - Turn_Speed;
      Drive_Error = Drive_Input - Drive_Speed;

      //errors are send to both controllers to get an output signal.
      Turn_Output = TurnController.Get(Turn_Error);
      Drive_Output = DriveController.Get(Drive_Error);
    }</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_pid_controller">6.6. PID controller</h3>
<div class="paragraph">
<p>An PID controller chosen to control the turn and drive speed of Willy. The animated gif below explains the basic function of the three different variables.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="assets/PID_Compensation_Animated.gif" alt="PID Compensation Animated">
</div>
</div>
<div class="sect3">
<h4 id="_implementation">6.6.1. Implementation</h4>
<div class="paragraph">
<p>These variables are set on start by using the initialize function (constructor) and have been tuned to make willy drive smoothly. Below the code for the PID variables construction and PID calculation can be found. The math on these calculations seems easy but the theory is rather complex, we advise to get a basic understanding, before starting to tune or even change our implementation as currently the robot is slow but very stable. For more information we refer you to the link below.</p>
</div>
<div class="paragraph">
<p><a href="https://en.wikipedia.org/wiki/PID_controller" class="bare">https://en.wikipedia.org/wiki/PID_controller</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-cpp" data-lang="cpp">    void Initialize(float P, float I, float D)
    {
      K_P = P;
      K_I = I;
      K_D = D;
    }

    float Get(float Error)
    {
      //Calculate Output with PID in velocity form.
      float Output = 0;
      Output = Output_1 + K_P * (Error - Error_1);
      Output += K_I * Error;
      Output += K_D * (Error - 2 * Error_1 + Error_2);

      //save parameters
      Output_1 = Output;
      Error_2 = Error_1;
      Error_1 = Error;

      //limit output to max 100 and min -100
      if (Output &gt; 100)
      {
        Output = 100;
      }
      if (Output &lt; -100)
      {
        Output = -100;
      }

      return Output;
    }</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_pid_viewer">6.6.2. PID Viewer</h4>
<div class="paragraph">
<p>In order to get a better understanding of what is happening and to ease tuning a special program is written. This program was used on a seperated laptop and connects via serial to the Arduino. The program constist of basic graphs representing the input, error and output signals.
A separate Serial to USB converter is needed to communicate with the Arduino Mega, since the USB port needs to be connected to the laptop.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="assets/PIDViewer.jpg" alt="PIDViewer">
</div>
</div>
<div class="paragraph">
<p>When building for the first the Platform.io will add some files in the .vscode directory that can be ignored. Its not recommended to add them to GiT. The files have hard-coded paths containing the username and are ignored.
To flash the Arduino simply press Upload in the Plaform.io extension.</p>
</div>
<div class="paragraph">
<p>Alternatively, the Arduino IDE could be used but mileage may vary.
:numbered:
:toc:
:toclevels: 5
:icons: font</p>
</div>
<div id="toc" class="dlist toc2">
<dl>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/welcome.html">Welcome</a></dt>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/projectwilly/index.html">Project Willy</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/projectwilly/history.html">History of Willy</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/projectwilly/projectwilly.html">Project Willy</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/projectwilly/Publicity.html">Publicity</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/projectwilly/Sponsors.html">Sponsors</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/getting_started/index.html">Getting started</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/getting_started/Introduction.html">Introduction to ROS</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/getting_started/Development-guide.html">Development Guide</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/getting_started/Driving_Willy.html">Driving Willy</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/getting_started/Manual.html">Manual</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/getting_started/Wiki.html">Wiki Manual</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/buildofwilly/index.html">Build of Willy</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/buildofwilly/Design_History.html">Design history</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/buildofwilly/Hardware.html">Hardware</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/architecture/index.html">Architecture</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/architecture/Software.html">Software Architecture</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/architecture/rostopics.html">ROS topic design</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/hardware_nodes/index.html">Raspberry Pi&#8217;s</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/hardware_nodes/sensor_node.html">Sensor node</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/hardware_nodes/si_node.html">Social Interaction node</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/hardware_nodes/power_node.html">Power node</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/components/index.html">Components</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/ROS-master.html">ROS master</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/ROS_master_lubuntu.html">New ROS master on Lubuntu</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/sonar.html">Sonar</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/lidar.html">Lidar</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/kinect.html">Kinect</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/Localization_and_navigation.html">Localization and navigation</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/motor_controller.html">Motor controller</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/joystick.html">Joystick</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/lessons_learned/index.html">Lessons learned</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/lessons_learned/Todo.html">Todo &amp; Advice</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/lessons_learned/Lessonslearned.html">Lessons Learned</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/index.html">Archive</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/previousgroups.html">Previous Groups</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/Archiveresearch.html">Research Archive</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/Skylab.html">Skylab Architecture</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/skylab/index.html">Skylab</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/multi_master.html">Multi master</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/willy_wrt.html">WillyWRT</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/Realisation.html">Realisation</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/Hardware.html">Hardware</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/brain.html">Brain</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/Design-guide.html">Design Guild</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/social_interaction.html">Social interaction</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/speech.html">Speech</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/speech_recognition.html">Speech recognition</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/IMU.html">IMU</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/human_detection.html">Human Detection</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/Radeffect_app.html">Radeffect App</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_joystick">7. Joystick</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The joystick is a node to process the raw joystick input signal to the direct input topic.</p>
</div>
<div class="sect2">
<h3 id="_repository_6">7.1. Repository</h3>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p><a href="https://github.com/Windesheim-Willy/joystick" class="external" target="_blank" rel="noopener">Windesheim-Willy/joystick</a></p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_prerequisites">7.2. Prerequisites</h3>
<div class="paragraph">
<p>The Laptop requires the device <strong>/dev/input/js0</strong> to be connected to the host. In most cases a (knock-off) PlayStation 3 or Xbox 360 controller will do the trick. The controller requires to have the <em>front right shoulder button marked R1</em> be pressed when controlling Willy with the left analogue stick. This component uses the default settings for <em>teleop</em> twist joy package, which may require a bit practice to maneuver through the building.
:numbered:
:toc:
:toclevels: 5
:icons: font</p>
</div>
<div id="toc" class="dlist toc2">
<dl>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/welcome.html">Welcome</a></dt>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/projectwilly/index.html">Project Willy</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/projectwilly/history.html">History of Willy</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/projectwilly/projectwilly.html">Project Willy</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/projectwilly/Publicity.html">Publicity</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/projectwilly/Sponsors.html">Sponsors</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/getting_started/index.html">Getting started</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/getting_started/Introduction.html">Introduction to ROS</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/getting_started/Development-guide.html">Development Guide</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/getting_started/Driving_Willy.html">Driving Willy</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/getting_started/Manual.html">Manual</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/getting_started/Wiki.html">Wiki Manual</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/buildofwilly/index.html">Build of Willy</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/buildofwilly/Design_History.html">Design history</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/buildofwilly/Hardware.html">Hardware</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/architecture/index.html">Architecture</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/architecture/Software.html">Software Architecture</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/architecture/rostopics.html">ROS topic design</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/hardware_nodes/index.html">Raspberry Pi&#8217;s</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/hardware_nodes/sensor_node.html">Sensor node</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/hardware_nodes/si_node.html">Social Interaction node</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/hardware_nodes/power_node.html">Power node</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/components/index.html">Components</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/ROS-master.html">ROS master</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/ROS_master_lubuntu.html">New ROS master on Lubuntu</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/sonar.html">Sonar</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/lidar.html">Lidar</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/kinect.html">Kinect</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/Localization_and_navigation.html">Localization and navigation</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/motor_controller.html">Motor controller</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/components/joystick.html">Joystick</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/lessons_learned/index.html">Lessons learned</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/lessons_learned/Todo.html">Todo &amp; Advice</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/lessons_learned/Lessonslearned.html">Lessons Learned</a></p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/index.html">Archive</a></dt>
<dd>
<div class="ulist">
<ul>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/previousgroups.html">Previous Groups</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/Archiveresearch.html">Research Archive</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/Skylab.html">Skylab Architecture</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/skylab/index.html">Skylab</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/multi_master.html">Multi master</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/willy_wrt.html">WillyWRT</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/Realisation.html">Realisation</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/Hardware.html">Hardware</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/brain.html">Brain</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/Design-guide.html">Design Guild</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/social_interaction.html">Social interaction</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/speech.html">Speech</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/speech_recognition.html">Speech recognition</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/IMU.html">IMU</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/human_detection.html">Human Detection</a></p>
</li>
<li>
<p><a href="https://Windesheim-Willy.github.io/WillyWiki/archive/Radeffect_app.html">Radeffect App</a></p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
<h1 id="_kinect" class="sect0">Kinect</h1>
<div class="sect1">
<h2 id="_development_choices">1. Development choices</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When analysing Willy the group of 2019 Semester 1 came to the conclusion that there where problems with Willy detecting objects at certain heights. To come up with a soloution
the group researched different sensors to find the right one for object detection on certain heights. As a result the Kinect was chosen as it suited the needs and was available to use.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_kinect_specs">2. Kinect Specs</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The version of the Kinect is version 1. That is because it was available to use and meant no delays in the project while waiting for the product to arrive.
In the future it might be a good idea to upgrade to a Kinect 2 as the Kinect 2 has better specs.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Feature</th>
<th class="tableblock halign-left valign-top">Kinect 1</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Color Camera</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">640 x 480 @30 fps</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Depth Camera</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">320 x 240</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Max Depth Distance</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">apr. 4.5 m</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Min Depth Distance</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">40 cm in near mode</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Depth Horizontal Field of View</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">57 degrees</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Depth Vertical Field of View</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">43 degrees</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tilt Motor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Skeleton Joints Defined</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20 joints</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Full Skeletons Tracked</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">USB Standard</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2.0</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2020-01-16 14:23:51 UTC
</div>
</div>
</body>
</html>